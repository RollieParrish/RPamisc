---
title: "EDW Discovery"
author: "Rollie Parrish"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{EDW Discovery}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, echo =FALSE, warning = FALSE, message = FALSE}
library(odbc)
library(RPamisc)
library(microbenchmark)

sql <- "SELECT * FROM information_schema.tables"

```

```{r functions, echo = FALSE}

odbc <- function(sql = sql) {
con <-  dbConnect(odbc::odbc(), "PHC_CA")

res <- dbGetQuery(con, sql)
dbDisconnect(con)
res
}

rpamisc <- function(sql = sql) {
res <- edwSQL(sql, resource = "PHC_CA", file = FALSE)$data
res
}


```


```{r benchmarks}


mbm <- microbenchmark(
        odbc = odbc(sql), 
        RPamisc = rpamisc(sql),
        times = 1
)

mbm 

```


```{r schema tables, eval = FALSE}
con <-  dbConnect(odbc::odbc(), "PHC_CA")
dbListTables(con)


dbDisconnect(con)

```
